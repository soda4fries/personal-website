---
import { ContactScreen } from '@/features/contact';
import { defaultLanguage, useTranslations, type LanguageCode } from '@/i18n/ui';
import BaseLayout from '../layouts/BaseLayout.astro';

const lang = defaultLanguage as LanguageCode;
const t = useTranslations(lang, 'contactPage');

// Configure the base URL for the contact server
// Change this to point to your contact server (e.g., 'https://api.yourdomain.com' or 'http://localhost:3001')
const contactServerBaseUrl = 'http://192.168.100.18:8000';

const pageMeta = {
  title: t('pageTitle'),
  description: t('pageDescription'),
};

const formTranslations = {
  anonymousMessageLabel: t('anonymousMessageLabel'),
  anonymousMessagePlaceholder: t('anonymousMessagePlaceholder'),
  publicMessageLabel: 'Public',
  publicMessageHelperText: '',
  sendAnonymousButtonLabel: t('sendAnonymousButtonLabel'),
  yourKeyIs: t('yourKeyIs'),
  copyKeyButtonLabel: t('copyKeyButtonLabel'),
  keyCopiedToast: t('keyCopiedToast'),
  enterKeyLabel: t('enterKeyLabel'),
  enterKeyPlaceholder: t('enterKeyPlaceholder'),
  checkReplyButtonLabel: t('checkReplyButtonLabel'),
  noReplyYet: t('noReplyYet'),
  replyReceived: t('replyReceived'),
  invalidKeyToast: t('invalidKeyToast'),
  checkingReplyToast: t('checkingReplyToast'),
  toastErrorUnexpected: t('toastErrorUnexpected'),
  toastErrorDetails: t('toastErrorDetails'),
  toastErrorValidationFailed: t('toastErrorValidationFailed'),
};

const layoutProps = {
  lang,
  mainHeadingTitle: t('title'), // Use the new title from i18n
  mainHeadingDescription: t('description'), // Use the new description from i18n
  formTranslations,
  orSeparatorText: 'test', // Added back as required by Props
  baseUrl: contactServerBaseUrl,
};
---

<BaseLayout pageTitle={pageMeta.title} pageDescription={pageMeta.description}>
  <ContactScreen {...layoutProps} />
</BaseLayout>